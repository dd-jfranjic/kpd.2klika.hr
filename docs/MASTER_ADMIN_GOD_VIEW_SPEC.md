# Master Admin "God View" Panel - Kompletna Specifikacija

**Verzija**: 1.0
**Datum**: 2025-12-15
**Status**: FINALNA SPECIFIKACIJA

---

## 1. Pregled i Ciljevi

### 1.1 Å to je "God View"?
Master Admin "God View" je sveobuhvatni administrativni panel koji pruÅ¾a **potpunu kontrolu i uvid** u sve aspekte KPD 2klika SaaS aplikacije.

### 1.2 KljuÄni Principi
| Princip | Opis |
|---------|------|
| **Potpuna vidljivost** | Sve informacije o svakom korisniku i organizaciji na jednom mjestu |
| **Potpuna kontrola** | MoguÄ‡nost izmjene bilo Äega bez ograniÄenja |
| **Impersonation** | MoguÄ‡nost "ulogiranja" kao bilo koji korisnik |
| **Bulk operacije** | Masovne akcije nad viÅ¡e entiteta odjednom |
| **Audit trail** | Sve akcije se logiraju i mogu se pratiti |

### 1.3 Master Admin Status
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MASTER ADMIN = UNLIMITED                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ Nema billing-a (0 kn/mj)                                    â”‚
â”‚  â€¢ Nema usage tracking-a (neograniÄeni upiti)                  â”‚
â”‚  â€¢ Pristup SVIM admin funkcijama                               â”‚
â”‚  â€¢ UI prikazuje "UNLIMITED" badge, NE "Enterprise"             â”‚
â”‚  â€¢ Detekcija putem NEXT_PUBLIC_ADMIN_EMAILS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Struktura Navigacije

### 2.1 Admin Sidebar (Nova Struktura)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  Dashboard                           â”‚  â† Landing page (NOVO!)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ENTITETI                               â”‚
â”‚  â”œâ”€â”€ ğŸ‘¥ Korisnici                       â”‚  â† /admin/users
â”‚  â”‚   â””â”€â”€ [User Detail]                  â”‚  â† /admin/users/:id (NOVO!)
â”‚  â”œâ”€â”€ ğŸ¢ Organizacije                    â”‚  â† /admin/organizations (NOVO!)
â”‚  â”‚   â””â”€â”€ [Org Detail]                   â”‚  â† /admin/organizations/:id (NOVO!)
â”‚  â””â”€â”€ ğŸ“‹ KPD Kodovi                      â”‚  â† /admin/kpd-codes
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BILLING & USAGE                        â”‚  â† NOVA SEKCIJA
â”‚  â”œâ”€â”€ ğŸ’³ Pretplate                       â”‚  â† /admin/subscriptions (NOVO!)
â”‚  â”œâ”€â”€ ğŸ“Š Fakture                         â”‚  â† /admin/invoices (NOVO!)
â”‚  â”œâ”€â”€ ğŸ“ˆ Usage Metrics                   â”‚  â† /admin/usage (NOVO!)
â”‚  â””â”€â”€ ğŸ Promo kodovi                    â”‚  â† /admin/promo-codes (NOVO!)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SISTEM                                 â”‚
â”‚  â”œâ”€â”€ âš™ï¸ Konfiguracija                   â”‚  â† /admin/config
â”‚  â”œâ”€â”€ ğŸ”— Integracije                     â”‚  â† /admin/integrations
â”‚  â””â”€â”€ ğŸ“ Audit Log                       â”‚  â† /admin/audit
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ANALITIKA                              â”‚
â”‚  â”œâ”€â”€ ğŸ“Š Dashboard Analytics             â”‚  â† /admin/analytics
â”‚  â””â”€â”€ ğŸ“‰ IzvjeÅ¡taji                      â”‚  â† /admin/reports (NOVO!)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Ukupno Stranica
| Kategorija | PostojeÄ‡e | Nove | Ukupno |
|------------|-----------|------|--------|
| Dashboard | 0 | 1 | 1 |
| Entiteti | 3 | 2 | 5 |
| Billing | 0 | 4 | 4 |
| Sistem | 3 | 0 | 3 |
| Analitika | 1 | 1 | 2 |
| **UKUPNO** | **7** | **8** | **15** |

---

## 3. Dashboard (Landing Page)

### 3.1 URL i Komponenta
```
Route: /admin
File: app/(admin)/admin/page.tsx (NOVO!)
```

### 3.2 Wireframe
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MASTER ADMIN DASHBOARD                                    [UNLIMITED] ğŸ‘¤   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ğŸ‘¥ USERS    â”‚ â”‚ ğŸ¢ ORGS     â”‚ â”‚ ğŸ’³ MRR      â”‚ â”‚ ğŸ“Š QUERIES  â”‚           â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚  (danas)    â”‚           â”‚
â”‚  â”‚    247      â”‚ â”‚     34      â”‚ â”‚  â‚¬2,450     â”‚ â”‚   1,234     â”‚           â”‚
â”‚  â”‚  +12 (7d)   â”‚ â”‚   +3 (7d)   â”‚ â”‚ +â‚¬340 (7d)  â”‚ â”‚  +15% (7d)  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸš¨ ALERTS (Potrebna paÅ¾nja)      â”‚ â”‚ ğŸ“ˆ REVENUE TREND (30 dana)       â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ âš ï¸ 3 usera blizu limita          â”‚ â”‚      â–ˆâ–ˆâ–ˆâ–ˆ                        â”‚ â”‚
â”‚  â”‚ âš ï¸ 2 neplaÄ‡ene fakture           â”‚ â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                        â”‚ â”‚
â”‚  â”‚ âš ï¸ 1 org bez aktivnosti (30d)    â”‚ â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â‚¬2,450                 â”‚ â”‚
â”‚  â”‚ âœ… Nema kritiÄnih problema        â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âš¡ QUICK ACTIONS                  â”‚ â”‚ ğŸ• RECENT ACTIVITY               â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ [+ Novi korisnik]                â”‚ â”‚ 14:23 - User created (marko@)   â”‚ â”‚
â”‚  â”‚ [+ Nova organizacija]            â”‚ â”‚ 14:15 - Plan upgraded (org: X)  â”‚ â”‚
â”‚  â”‚ [Impersonate user]               â”‚ â”‚ 13:45 - Invoice paid (â‚¬49)      â”‚ â”‚
â”‚  â”‚ [Bulk actions]                   â”‚ â”‚ 13:30 - User suspended (ivan@)  â”‚ â”‚
â”‚  â”‚ [Export data]                    â”‚ â”‚ [View all â†’]                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ğŸ“Š PLAN DISTRIBUTION                                                    â”‚â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â”‚
â”‚  â”‚ FREE     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 150 (61%)        â”‚â”‚
â”‚  â”‚ PLUS     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45 (18%)                                   â”‚â”‚
â”‚  â”‚ PRO      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 30 (12%)                                         â”‚â”‚
â”‚  â”‚ BUSINESS â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 18 (7%)                                              â”‚â”‚
â”‚  â”‚ ENTERPR  â–ˆâ–ˆ 4 (2%)                                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Komponente i API Pozivi
```typescript
// Dashboard komponente
interface DashboardMetrics {
  totalUsers: number;
  userGrowth7d: number;
  totalOrgs: number;
  orgGrowth7d: number;
  mrr: number;
  mrrGrowth7d: number;
  queriesToday: number;
  queryGrowth7d: number;
}

interface Alert {
  id: string;
  type: 'warning' | 'error' | 'info';
  message: string;
  link?: string;
  entityType?: 'user' | 'org' | 'invoice';
  entityId?: string;
}

// API Endpoints (Backend)
GET /api/admin/dashboard/metrics
GET /api/admin/dashboard/alerts
GET /api/admin/dashboard/recent-activity
GET /api/admin/dashboard/plan-distribution
```

---

## 4. Korisnici (Users)

### 4.1 Lista Korisnika (/admin/users)

#### 4.1.1 PoboljÅ¡anja Liste
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ KORISNICI                                              [+ Novi] [Bulk â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” [PretraÅ¾i...]  [Plan â–¼] [Status â–¼] [Org â–¼] [Usage â–¼]  [Export CSV]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ â”‚ User                â”‚ Org           â”‚ Plan    â”‚ Usage    â”‚ Status â”‚ âš¡â”‚
â”‚  â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”‚
â”‚  â˜ â”‚ ğŸ‘¤ marko@gmail.com  â”‚ ğŸ¢ TechCo    â”‚ PRO     â”‚ 450/500  â”‚ ğŸŸ¢     â”‚ â‹® â”‚
â”‚  â˜ â”‚ ğŸ‘¤ ana@firma.hr     â”‚ ğŸ¢ Firma d.o.oâ”‚ PLUS   â”‚ 89/100   â”‚ ğŸŸ¢     â”‚ â‹® â”‚
â”‚  â˜ â”‚ ğŸ‘¤ ivan@test.com    â”‚ -             â”‚ FREE    â”‚ 23/25    â”‚ ğŸŸ¡     â”‚ â‹® â”‚
â”‚  â˜ â”‚ ğŸ‘¤ petra@corp.hr    â”‚ ğŸ¢ MegaCorp  â”‚ BUSINESSâ”‚ 890/1000 â”‚ ğŸŸ¢     â”‚ â‹® â”‚
â”‚  â˜‘ â”‚ ğŸ‘¤ john@spam.com    â”‚ -             â”‚ FREE    â”‚ 25/25    â”‚ ğŸ”´     â”‚ â‹® â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â—€ 1 2 3 ... 25 â–¶                                    Prikazano 1-10 od 247 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [2 odabrano]  [ğŸ”´ Suspendiraj]  [ğŸŸ¢ Aktiviraj]  [ğŸ—‘ï¸ ObriÅ¡i]  [ğŸ“§ Email]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.2 Bulk Akcije (KRITIÄŒNO!)
```typescript
interface BulkAction {
  action: 'suspend' | 'activate' | 'delete' | 'change_plan' | 'send_email';
  userIds: string[];
  // Za change_plan:
  newPlan?: 'FREE' | 'PLUS' | 'PRO' | 'BUSINESS' | 'ENTERPRISE';
  // Za send_email:
  emailTemplate?: string;
  emailSubject?: string;
}

// API Endpoint
POST /api/admin/users/bulk
Body: BulkAction

// Primjer response-a
{
  success: true,
  processed: 15,
  failed: 0,
  results: [
    { userId: "xxx", status: "success" },
    ...
  ]
}
```

#### 4.1.3 Row Actions Menu (â‹®)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ View details        â”‚  â†’ /admin/users/:id
â”‚ âœï¸ Edit                 â”‚
â”‚ ğŸ­ Impersonate          â”‚  â†’ KRITIÄŒNO!
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ğŸ’³ Change plan          â”‚
â”‚ ğŸ Add credits          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ğŸŸ¢ Activate             â”‚
â”‚ ğŸ”´ Suspend              â”‚
â”‚ ğŸ—‘ï¸ Delete               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 User Detail Page (/admin/users/:id) - NOVO!

#### 4.2.1 URL i Komponenta
```
Route: /admin/users/[id]
File: app/(admin)/admin/users/[id]/page.tsx (NOVO!)
```

#### 4.2.2 Kompletni Wireframe
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Natrag   ğŸ‘¤ MARKO HORVAT                    [ğŸ­ Impersonate] [âœï¸ Edit]  â”‚
â”‚             marko@techco.hr                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ PROFIL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€ ORGANIZACIJA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                             â”‚  â”‚                                      â”‚  â”‚
â”‚  â”‚  Ime: Marko Horvat          â”‚  â”‚  ğŸ¢ TechCo d.o.o.                    â”‚  â”‚
â”‚  â”‚  Email: marko@techco.hr     â”‚  â”‚  Role: SUPER_ADMIN                   â”‚  â”‚
â”‚  â”‚  Clerk ID: user_xxx         â”‚  â”‚  ÄŒlanovi: 5                          â”‚  â”‚
â”‚  â”‚  Status: ğŸŸ¢ Aktivan         â”‚  â”‚  Kreirana: 15.01.2025                â”‚  â”‚
â”‚  â”‚  Kreiran: 10.01.2025        â”‚  â”‚                                      â”‚  â”‚
â”‚  â”‚  Zadnji login: Danas 14:23  â”‚  â”‚  [View Organization â†’]               â”‚  â”‚
â”‚  â”‚  Logins (30d): 45           â”‚  â”‚                                      â”‚  â”‚
â”‚  â”‚                             â”‚  â”‚                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ PLAN & BILLING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  Trenutni plan: PRO (â‚¬29/mj)                    [Change Plan â–¼]         â”‚â”‚
â”‚  â”‚  Status pretplate: ğŸŸ¢ Aktivna                                           â”‚â”‚
â”‚  â”‚  Stripe Customer: cus_xxx                       [View in Stripe â†’]      â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  PretplaÄ‡en od: 15.01.2025                                              â”‚â”‚
â”‚  â”‚  SljedeÄ‡e naplaÄ‡ivanje: 15.02.2025 (â‚¬29)                                â”‚â”‚
â”‚  â”‚  Payment method: Visa â€¢â€¢â€¢â€¢ 4242                                         â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Lifetime Value: â‚¬174                                                   â”‚â”‚
â”‚  â”‚  Ukupno plaÄ‡eno: â‚¬174 (6 faktura)                                       â”‚â”‚
â”‚  â”‚  NeplaÄ‡eno: â‚¬0                                                          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ğŸ“‹ View Invoices] [ğŸ Add Credits] [â¸ï¸ Pause] [âŒ Cancel]             â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ USAGE (Ovaj mjesec) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  Klasifikacije: 450 / 500                [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 90%     â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  Trend: â–² +15% vs proÅ¡li mjesec                                         â”‚â”‚
â”‚  â”‚  ProsjeÄno/dan: 15 upita                                                â”‚â”‚
â”‚  â”‚  Peak: 45 upita (12.02.2025)                                            â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚â”‚
â”‚  â”‚  â”‚     ğŸ“Š Usage History (6 mjeseci)                                â”‚    â”‚â”‚
â”‚  â”‚  â”‚          â–ˆâ–ˆâ–ˆâ–ˆ                                                   â”‚    â”‚â”‚
â”‚  â”‚  â”‚        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                                   â”‚    â”‚â”‚
â”‚  â”‚  â”‚      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                                             â”‚    â”‚â”‚
â”‚  â”‚  â”‚    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                           â”‚    â”‚â”‚
â”‚  â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                       â”‚    â”‚â”‚
â”‚  â”‚  â”‚  Sep  Oct  Nov  Dec  Jan  Feb                                   â”‚    â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ğŸ“Š Detailed Analytics] [â¬‡ï¸ Export Usage Data]                         â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ AKTIVNOST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸ• Zadnjih 10 aktivnosti:                                              â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Danas 14:23 - Klasificirao dokument "Ponuda_2025.pdf"                  â”‚â”‚
â”‚  â”‚  Danas 14:15 - Login                                                    â”‚â”‚
â”‚  â”‚  Danas 10:30 - Klasificirao dokument "Ugovor_firma.docx"                â”‚â”‚
â”‚  â”‚  JuÄer 16:45 - Promijenio settings                                      â”‚â”‚
â”‚  â”‚  JuÄer 09:00 - Login                                                    â”‚â”‚
â”‚  â”‚  ...                                                                    â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [View Full Activity Log â†’]                                             â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ ADMIN AKCIJE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ğŸ­ Impersonate User]   [ğŸ“§ Send Email]   [ğŸ”„ Reset Password]          â”‚â”‚
â”‚  â”‚  [ğŸŸ¢ Activate]   [ğŸ”´ Suspend]   [ğŸ—‘ï¸ Delete User]                        â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  âš ï¸ Danger Zone:                                                        â”‚â”‚
â”‚  â”‚  [Force Logout All Sessions]  [Transfer Ownership]  [Delete All Data]   â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.3 Podaci na User Detail stranici
```typescript
interface UserDetailData {
  // Profil
  id: string;
  clerkId: string;
  email: string;
  firstName: string;
  lastName: string;
  imageUrl?: string;
  status: 'active' | 'suspended' | 'pending';
  createdAt: Date;
  lastLoginAt: Date;
  loginCount30d: number;

  // Organizacija
  organization?: {
    id: string;
    name: string;
    role: 'MEMBER' | 'SUPER_ADMIN';
    memberCount: number;
    createdAt: Date;
  };

  // Plan & Billing
  subscription: {
    plan: 'FREE' | 'PLUS' | 'PRO' | 'BUSINESS' | 'ENTERPRISE';
    status: 'active' | 'cancelled' | 'past_due' | 'trialing';
    stripeCustomerId: string;
    stripeSubscriptionId?: string;
    currentPeriodStart: Date;
    currentPeriodEnd: Date;
    pricePerMonth: number;
    paymentMethod?: {
      brand: string;
      last4: string;
    };
  };

  // Billing history
  billing: {
    lifetimeValue: number;
    totalPaid: number;
    invoiceCount: number;
    unpaidAmount: number;
  };

  // Usage
  usage: {
    current: number;
    limit: number;
    percentage: number;
    trend: number; // vs last month
    avgPerDay: number;
    peakDay: { date: Date; count: number };
    history: Array<{ month: string; count: number }>;
  };

  // Activity
  recentActivity: Array<{
    timestamp: Date;
    action: string;
    details?: string;
  }>;
}
```

---

## 5. Organizacije (Organizations) - NOVO!

### 5.1 Lista Organizacija (/admin/organizations)

#### 5.1.1 URL i Komponenta
```
Route: /admin/organizations
File: app/(admin)/admin/organizations/page.tsx (NOVO!)
```

#### 5.1.2 Wireframe
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¢ ORGANIZACIJE                                           [+ Nova] [Bulk â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” [PretraÅ¾i...]  [Plan â–¼] [Members â–¼] [Status â–¼]        [Export CSV]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ â”‚ Organizacija       â”‚ Owner         â”‚ Plan    â”‚ Members â”‚ MRR   â”‚ âš¡   â”‚
â”‚  â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”‚
â”‚  â˜ â”‚ ğŸ¢ TechCo d.o.o.   â”‚ marko@...     â”‚ PRO     â”‚ 5       â”‚ â‚¬145  â”‚ â‹®    â”‚
â”‚  â˜ â”‚ ğŸ¢ Firma d.o.o.    â”‚ ana@...       â”‚ PLUS    â”‚ 3       â”‚ â‚¬57   â”‚ â‹®    â”‚
â”‚  â˜ â”‚ ğŸ¢ MegaCorp        â”‚ petra@...     â”‚ BUSINESSâ”‚ 12      â”‚ â‚¬588  â”‚ â‹®    â”‚
â”‚  â˜ â”‚ ğŸ¢ StartupXYZ      â”‚ john@...      â”‚ FREE    â”‚ 2       â”‚ â‚¬0    â”‚ â‹®    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â—€ 1 2 3 â–¶                                         Prikazano 1-10 od 34    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [2 odabrano]  [ğŸ”´ Suspendiraj]  [ğŸŸ¢ Aktiviraj]  [ğŸ—‘ï¸ ObriÅ¡i]  [ğŸ“§ Email]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Organization Detail Page (/admin/organizations/:id) - NOVO!

#### 5.2.1 URL i Komponenta
```
Route: /admin/organizations/[id]
File: app/(admin)/admin/organizations/[id]/page.tsx (NOVO!)
```

#### 5.2.2 Kompletni Wireframe
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Natrag   ğŸ¢ TECHCO D.O.O.                               [âœï¸ Edit]       â”‚
â”‚             Kreirana: 15.01.2025                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ INFO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€ OWNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                             â”‚  â”‚                                      â”‚  â”‚
â”‚  â”‚  Naziv: TechCo d.o.o.       â”‚  â”‚  ğŸ‘¤ Marko Horvat                     â”‚  â”‚
â”‚  â”‚  Clerk Org ID: org_xxx      â”‚  â”‚  marko@techco.hr                     â”‚  â”‚
â”‚  â”‚  Status: ğŸŸ¢ Aktivna         â”‚  â”‚  Role: SUPER_ADMIN                   â”‚  â”‚
â”‚  â”‚  Kreirana: 15.01.2025       â”‚  â”‚                                      â”‚  â”‚
â”‚  â”‚                             â”‚  â”‚  [View User â†’] [ğŸ­ Impersonate]      â”‚  â”‚
â”‚  â”‚                             â”‚  â”‚                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ ÄŒLANOVI (5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸ‘¤ â”‚ Email               â”‚ Role        â”‚ Plan    â”‚ Usage    â”‚ Status   â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  ğŸ‘¤ â”‚ marko@techco.hr     â”‚ SUPER_ADMIN â”‚ PRO     â”‚ 450/500  â”‚ ğŸŸ¢       â”‚â”‚
â”‚  â”‚  ğŸ‘¤ â”‚ ana@techco.hr       â”‚ MEMBER      â”‚ PRO     â”‚ 320/500  â”‚ ğŸŸ¢       â”‚â”‚
â”‚  â”‚  ğŸ‘¤ â”‚ ivan@techco.hr      â”‚ MEMBER      â”‚ PRO     â”‚ 210/500  â”‚ ğŸŸ¢       â”‚â”‚
â”‚  â”‚  ğŸ‘¤ â”‚ petra@techco.hr     â”‚ MEMBER      â”‚ PRO     â”‚ 180/500  â”‚ ğŸŸ¢       â”‚â”‚
â”‚  â”‚  ğŸ‘¤ â”‚ john@techco.hr      â”‚ MEMBER      â”‚ PRO     â”‚ 50/500   â”‚ ğŸŸ¡       â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [+ Add Member]  [ğŸ“§ Email All]  [Manage Roles]                         â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ BILLING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  Org Plan: PRO (â‚¬29/mj per user)                   [Change Plan â–¼]      â”‚â”‚
â”‚  â”‚  Ukupni MRR: â‚¬145 (5 users Ã— â‚¬29)                                       â”‚â”‚
â”‚  â”‚  Stripe Customer: cus_org_xxx                      [View in Stripe â†’]   â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  SljedeÄ‡a faktura: 15.02.2025 (â‚¬145)                                    â”‚â”‚
â”‚  â”‚  Payment method: Visa â€¢â€¢â€¢â€¢ 4242                                         â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚  Lifetime Value: â‚¬870                                                   â”‚â”‚
â”‚  â”‚  Ukupno plaÄ‡eno: â‚¬870 (6 faktura)                                       â”‚â”‚
â”‚  â”‚  NeplaÄ‡eno: â‚¬0                                                          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ğŸ“‹ View Invoices] [ğŸ Add Credits] [â¸ï¸ Pause] [âŒ Cancel]             â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ USAGE (Agregat za Org) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  Ukupne klasifikacije (ovaj mj): 1,210 / 2,500    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 48%  â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  Po Älanovima:                                                          â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ marko@: 450 (37%)                                                  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ ana@: 320 (26%)                                                    â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ ivan@: 210 (17%)                                                   â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ petra@: 180 (15%)                                                  â”‚â”‚
â”‚  â”‚  â””â”€â”€ john@: 50 (5%)                                                     â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ğŸ“Š Detailed Analytics]                                                â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€ ADMIN AKCIJE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [ğŸ“§ Email All Members]  [Transfer Ownership]  [Merge with Org]         â”‚â”‚
â”‚  â”‚  [ğŸŸ¢ Activate]   [ğŸ”´ Suspend]   [ğŸ—‘ï¸ Delete Organization]                â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  âš ï¸ Danger Zone:                                                        â”‚â”‚
â”‚  â”‚  [Force Logout All]  [Delete All Data]  [Archive Organization]          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Impersonation Feature (KRITIÄŒNO!)

### 6.1 Å to je Impersonation?
MoguÄ‡nost Master Admin-a da se "ulogira" kao bilo koji korisnik bez potrebe za njihovom lozinkom. Ovo je esencijalno za:
- Debugging korisniÄkih problema
- Verifikaciju bug reportova
- Testiranje korisniÄkog iskustva
- Support operacije

### 6.2 Sigurnosni Zahtjevi
```typescript
// Impersonation mora:
// 1. Biti dostupan SAMO Master Admin korisnicima
// 2. Logirati SVE impersonation sesije u audit log
// 3. Prikazivati jasnu indikaciju da je sesija impersonated
// 4. OmoguÄ‡iti jednostavan povratak u admin mode
// 5. Imati timeout (npr. 1 sat)
// 6. NE smjeti dopustiti kritiÄne akcije (brisanje accounta, promjena passworda)
```

### 6.3 Wireframe - Impersonation Banner
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ IMPERSONATING: marko@techco.hr                      [End Impersonation] â”‚
â”‚    Sesija istjeÄe za: 58:32                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                             â”‚
â”‚  [Normalna aplikacija kao da je user marko@techco.hr]                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 Implementacija Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin klikne   â”‚â”€â”€â”€â”€â–¶â”‚  API: POST      â”‚â”€â”€â”€â”€â–¶â”‚  Kreiraj        â”‚
â”‚  "Impersonate"  â”‚     â”‚  /impersonate   â”‚     â”‚  session token  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                         â”‚
                                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Log u audit    â”‚â—€â”€â”€â”€â”€â”‚  Set cookie +   â”‚â—€â”€â”€â”€â”€â”‚  Return token   â”‚
â”‚  log            â”‚     â”‚  redirect       â”‚     â”‚  + expiry       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5 API Endpoint
```typescript
// Backend
POST /api/admin/impersonate
Body: { userId: string }
Response: {
  success: true,
  impersonationToken: string,
  expiresAt: Date,
  targetUser: { id, email, name }
}

DELETE /api/admin/impersonate
Response: { success: true }
```

### 6.6 OgraniÄenja tijekom Impersonation-a
| Akcija | Dozvoljena? |
|--------|-------------|
| View dashboard | âœ… Da |
| Classify documents | âœ… Da |
| Change settings | âœ… Da |
| Change password | âŒ Ne |
| Delete account | âŒ Ne |
| Billing changes | âŒ Ne |
| Invite members | âš ï¸ Warning |

---

## 7. Billing Management (NOVA SEKCIJA)

### 7.1 Pretplate (/admin/subscriptions)

#### 7.1.1 Wireframe
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’³ PRETPLATE                                             [Export] [Sync]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” [PretraÅ¾i...]  [Plan â–¼] [Status â–¼] [Period â–¼]                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  User/Org            â”‚ Plan     â”‚ Status   â”‚ MRR     â”‚ Next Bill â”‚ Actions â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  ğŸ‘¤ marko@techco.hr  â”‚ PRO      â”‚ ğŸŸ¢ Activeâ”‚ â‚¬29     â”‚ 15.02     â”‚ â‹®       â”‚
â”‚  ğŸ¢ TechCo (5)       â”‚ PRO      â”‚ ğŸŸ¢ Activeâ”‚ â‚¬145    â”‚ 15.02     â”‚ â‹®       â”‚
â”‚  ğŸ‘¤ ana@firma.hr     â”‚ PLUS     â”‚ ğŸŸ¢ Activeâ”‚ â‚¬19     â”‚ 20.02     â”‚ â‹®       â”‚
â”‚  ğŸ‘¤ ivan@test.com    â”‚ PLUS     â”‚ ğŸŸ¡ Past  â”‚ â‚¬19     â”‚ Overdue   â”‚ â‹®       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         Total MRR: â‚¬2,450    Active: 234   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.1.2 Akcije na Pretplati
```
Row Actions (â‹®):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ View details          â”‚
â”‚ ğŸ“‹ View invoices          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸ“ˆ Upgrade plan           â”‚
â”‚ ğŸ“‰ Downgrade plan         â”‚
â”‚ ğŸ”„ Change billing cycle   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸ Apply coupon           â”‚
â”‚ ğŸ’° Add credits            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â¸ï¸ Pause subscription     â”‚
â”‚ âŒ Cancel subscription    â”‚
â”‚ ğŸ”„ Resume subscription    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Fakture (/admin/invoices)

#### 7.2.1 Wireframe
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š FAKTURE                                                     [Export]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” [PretraÅ¾i...]  [Status â–¼] [Period â–¼] [Amount â–¼]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Invoice #   â”‚ Customer          â”‚ Amount  â”‚ Status â”‚ Date      â”‚ Actions  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  INV-001234  â”‚ ğŸ‘¤ marko@...      â”‚ â‚¬29     â”‚ ğŸŸ¢ Paidâ”‚ 15.01.25  â”‚ â‹®        â”‚
â”‚  INV-001233  â”‚ ğŸ¢ TechCo         â”‚ â‚¬145    â”‚ ğŸŸ¢ Paidâ”‚ 15.01.25  â”‚ â‹®        â”‚
â”‚  INV-001232  â”‚ ğŸ‘¤ ana@...        â”‚ â‚¬19     â”‚ ğŸ”´ Due â”‚ 10.01.25  â”‚ â‹®        â”‚
â”‚  INV-001231  â”‚ ğŸ‘¤ ivan@...       â”‚ â‚¬19     â”‚ ğŸŸ¡ Pendâ”‚ 05.01.25  â”‚ â‹®        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   Total: â‚¬2,450    Unpaid: â‚¬38   Count: 234â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.2.2 Akcije na Fakturi
```
Row Actions (â‹®):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ View PDF              â”‚
â”‚ ğŸ“§ Send to customer       â”‚
â”‚ ğŸ“‹ Copy link              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ âœ… Mark as paid           â”‚
â”‚ ğŸ’° Record payment         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ğŸ”„ Refund                 â”‚
â”‚ âŒ Void invoice           â”‚
â”‚ ğŸ“ Add note               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Promo Kodovi (/admin/promo-codes) - NOVO!

#### 7.3.1 Wireframe
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ PROMO KODOVI                                          [+ Novi kod]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Kod          â”‚ Discount   â”‚ Type      â”‚ Used    â”‚ Expires   â”‚ Status â”‚ âš¡ â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”‚
â”‚  WELCOME2025  â”‚ 20%        â”‚ All plans â”‚ 45/100  â”‚ 31.03.25  â”‚ ğŸŸ¢     â”‚ â‹®  â”‚
â”‚  PROTEN50     â”‚ 50%        â”‚ PRO only  â”‚ 12/âˆ    â”‚ Never     â”‚ ğŸŸ¢     â”‚ â‹®  â”‚
â”‚  BETA2024     â”‚ 100%       â”‚ All plans â”‚ 5/5     â”‚ -         â”‚ ğŸ”´     â”‚ â‹®  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Kreiranje novog promo koda:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Kod: [NEWCODE2025]  Discount: [25] %  Plan: [All â–¼]                 â”‚   â”‚
â”‚  â”‚ Max uses: [100]  Expires: [31.12.2025]                               â”‚   â”‚
â”‚  â”‚                                               [Create Code]          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Bulk Actions (KRITIÄŒNO!)

### 8.1 PodrÅ¾ane Bulk Akcije

| Entitet | Akcija | Opis |
|---------|--------|------|
| **Users** | Suspend | Suspendira viÅ¡e korisnika odjednom |
| **Users** | Activate | Aktivira suspendirane korisnike |
| **Users** | Delete | BriÅ¡e korisnike (soft delete) |
| **Users** | Change Plan | Mijenja plan za viÅ¡e korisnika |
| **Users** | Send Email | Å alje bulk email |
| **Users** | Export | Exporta podatke u CSV |
| **Orgs** | Suspend | Suspendira organizacije |
| **Orgs** | Activate | Aktivira organizacije |
| **Orgs** | Delete | BriÅ¡e organizacije |
| **Invoices** | Send Reminder | Å alje reminder za neplaÄ‡ene |
| **Invoices** | Mark Paid | OznaÄava kao plaÄ‡eno |
| **Invoices** | Void | PoniÅ¡tava fakture |

### 8.2 Bulk Action Modal
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ BULK ACTION: Suspend Users                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Odabrano: 15 korisnika                                        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ‘¤ marko@techco.hr                                      â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ ana@firma.hr                                         â”‚   â”‚
â”‚  â”‚ ğŸ‘¤ ivan@test.com                                        â”‚   â”‚
â”‚  â”‚ ... i joÅ¡ 12                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Razlog suspenzije:                                            â”‚
â”‚  [ Odaberite razlog â–¼ ]                                        â”‚
â”‚  â—‹ Violation of ToS                                            â”‚
â”‚  â—‹ Payment issues                                              â”‚
â”‚  â—‹ Spam/Abuse                                                  â”‚
â”‚  â—‹ User request                                                â”‚
â”‚  â—‹ Other: [________________]                                   â”‚
â”‚                                                                 â”‚
â”‚  â˜ Send notification email to users                            â”‚
â”‚  â˜ Log reason in audit trail                                   â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ Ova akcija Ä‡e suspendirati 15 korisnika!                   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          [Cancel]  [ğŸ”´ Confirm Suspension]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 Bulk Action Progress
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Processing Bulk Action...                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 45%                â”‚
â”‚                                                                 â”‚
â”‚  Processed: 7/15                                                â”‚
â”‚  Success: 6                                                     â”‚
â”‚  Failed: 1                                                      â”‚
â”‚                                                                 â”‚
â”‚  Current: Suspending ivan@test.com...                          â”‚
â”‚                                                                 â”‚
â”‚  Errors:                                                        â”‚
â”‚  âš ï¸ marko@techco.hr - Cannot suspend org owner                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. API Struktura

### 9.1 Novi API Endpoints

```typescript
// Dashboard
GET    /api/admin/dashboard/metrics
GET    /api/admin/dashboard/alerts
GET    /api/admin/dashboard/recent-activity
GET    /api/admin/dashboard/plan-distribution

// Users (poboljÅ¡ano)
GET    /api/admin/users                    // Lista s filterima
GET    /api/admin/users/:id                // Detail view
PATCH  /api/admin/users/:id                // Update user
DELETE /api/admin/users/:id                // Soft delete
POST   /api/admin/users/bulk               // Bulk operations
GET    /api/admin/users/:id/activity       // Activity log
GET    /api/admin/users/:id/usage          // Usage history
GET    /api/admin/users/:id/billing        // Billing history

// Organizations (NOVO!)
GET    /api/admin/organizations            // Lista s filterima
GET    /api/admin/organizations/:id        // Detail view
PATCH  /api/admin/organizations/:id        // Update org
DELETE /api/admin/organizations/:id        // Soft delete
POST   /api/admin/organizations/bulk       // Bulk operations
GET    /api/admin/organizations/:id/members // Members list
GET    /api/admin/organizations/:id/usage  // Aggregated usage
GET    /api/admin/organizations/:id/billing // Billing info

// Impersonation (NOVO!)
POST   /api/admin/impersonate              // Start impersonation
DELETE /api/admin/impersonate              // End impersonation
GET    /api/admin/impersonate/status       // Check status

// Billing (NOVO!)
GET    /api/admin/subscriptions            // All subscriptions
PATCH  /api/admin/subscriptions/:id        // Modify subscription
POST   /api/admin/subscriptions/:id/pause  // Pause
POST   /api/admin/subscriptions/:id/resume // Resume
POST   /api/admin/subscriptions/:id/cancel // Cancel

GET    /api/admin/invoices                 // All invoices
GET    /api/admin/invoices/:id             // Invoice detail
POST   /api/admin/invoices/:id/send        // Send invoice
POST   /api/admin/invoices/:id/mark-paid   // Mark as paid
POST   /api/admin/invoices/:id/refund      // Refund
POST   /api/admin/invoices/:id/void        // Void invoice

GET    /api/admin/promo-codes              // List codes
POST   /api/admin/promo-codes              // Create code
PATCH  /api/admin/promo-codes/:id          // Update code
DELETE /api/admin/promo-codes/:id          // Delete code

// Usage (NOVO!)
GET    /api/admin/usage/overview           // Usage overview
GET    /api/admin/usage/by-plan            // Usage by plan
GET    /api/admin/usage/by-user/:id        // User usage detail
GET    /api/admin/usage/by-org/:id         // Org usage detail

// Export
POST   /api/admin/export/users             // Export users CSV
POST   /api/admin/export/organizations     // Export orgs CSV
POST   /api/admin/export/invoices          // Export invoices CSV
POST   /api/admin/export/usage             // Export usage CSV
```

---

## 10. Implementacijski Plan

### 10.1 Faze Implementacije

```
FAZA 1: Foundations (Prioritet: KRITIÄŒNO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Dashboard landing page (/admin)
â–¡ User Detail page (/admin/users/:id)
â–¡ Organizations lista i Detail page
â–¡ API endpoints za detail views
Procjena: 3-4 dana

FAZA 2: Impersonation (Prioritet: KRITIÄŒNO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Backend impersonation logic
â–¡ Token generation i validation
â–¡ Impersonation banner UI
â–¡ Audit logging za impersonation
â–¡ Restricted actions during impersonation
Procjena: 2-3 dana

FAZA 3: Bulk Actions (Prioritet: KRITIÄŒNO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Checkbox selection na listama
â–¡ Bulk action toolbar
â–¡ Bulk action modals
â–¡ Backend bulk processing
â–¡ Progress tracking
â–¡ Error handling
Procjena: 2-3 dana

FAZA 4: Billing Management (Prioritet: VISOK)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Subscriptions page
â–¡ Invoices page
â–¡ Promo codes page
â–¡ Stripe integration za admin actions
â–¡ Manual plan changes
â–¡ Credit system
Procjena: 3-4 dana

FAZA 5: Polish & Integration (Prioritet: SREDNJI)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â–¡ Usage metrics pages
â–¡ Export functionality
â–¡ Email templates
â–¡ Dashboard alerts
â–¡ Recent activity feed
â–¡ Testing & bug fixes
Procjena: 2-3 dana

UKUPNO: ~14-17 radnih dana
```

### 10.2 TehniÄki Stack

| Komponenta | Tehnologija |
|------------|-------------|
| Frontend | Next.js 14, React, TypeScript |
| UI Components | shadcn/ui, Tailwind CSS |
| State | React Query (TanStack Query) |
| Forms | React Hook Form + Zod |
| Backend | NestJS, Prisma |
| Auth | Clerk |
| Billing | Stripe |
| Database | PostgreSQL |

### 10.3 File Structure (Nove datoteke)

```
app/(admin)/admin/
â”œâ”€â”€ page.tsx                          # Dashboard (NOVO!)
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ page.tsx                      # Lista (poboljÅ¡ano)
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx                  # User Detail (NOVO!)
â”œâ”€â”€ organizations/                     # NOVO!
â”‚   â”œâ”€â”€ page.tsx                      # Lista
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx                  # Org Detail
â”œâ”€â”€ subscriptions/
â”‚   â””â”€â”€ page.tsx                      # NOVO!
â”œâ”€â”€ invoices/
â”‚   â””â”€â”€ page.tsx                      # NOVO!
â”œâ”€â”€ promo-codes/
â”‚   â””â”€â”€ page.tsx                      # NOVO!
â”œâ”€â”€ usage/
â”‚   â””â”€â”€ page.tsx                      # NOVO!
â””â”€â”€ components/
    â”œâ”€â”€ ImpersonationBanner.tsx       # NOVO!
    â”œâ”€â”€ BulkActionToolbar.tsx         # NOVO!
    â”œâ”€â”€ BulkActionModal.tsx           # NOVO!
    â”œâ”€â”€ DashboardMetrics.tsx          # NOVO!
    â””â”€â”€ AlertsPanel.tsx               # NOVO!

backend/src/admin/
â”œâ”€â”€ admin.controller.ts               # PoboljÅ¡ano
â”œâ”€â”€ admin.service.ts                  # PoboljÅ¡ano
â”œâ”€â”€ impersonation/                    # NOVO!
â”‚   â”œâ”€â”€ impersonation.controller.ts
â”‚   â”œâ”€â”€ impersonation.service.ts
â”‚   â””â”€â”€ impersonation.guard.ts
â”œâ”€â”€ billing/                          # NOVO!
â”‚   â”œâ”€â”€ billing.controller.ts
â”‚   â””â”€â”€ billing.service.ts
â””â”€â”€ bulk/                             # NOVO!
    â”œâ”€â”€ bulk.controller.ts
    â””â”€â”€ bulk.service.ts
```

---

## 11. Sigurnosna Razmatranja

### 11.1 Autorizacija
```typescript
// Svi admin endpointi moraju imati:
@UseGuards(JwtAuthGuard, AdminGuard)
@Controller('api/admin')
export class AdminController {
  // ...
}

// AdminGuard provjerava:
// 1. User je autenticiran
// 2. User ima role SUPER_ADMIN
// 3. User email je u ADMIN_EMAILS listi
```

### 11.2 Audit Logging
```typescript
// SVE admin akcije se moraju logirati:
interface AdminAuditLog {
  adminId: string;
  adminEmail: string;
  action: string;
  targetType: 'user' | 'org' | 'subscription' | 'invoice' | 'config';
  targetId: string;
  details: Record<string, any>;
  ipAddress: string;
  userAgent: string;
  timestamp: Date;
}
```

### 11.3 Impersonation Security
- Token expiry: 1 sat
- Single active session
- Cannot impersonate other admins
- Restricted dangerous actions
- Full audit trail
- Visual indicator always visible

---

## 12. Success Metrics

### 12.1 Funkcionalnost
- [ ] Master Admin moÅ¾e vidjeti SVE korisnike s kompletnim info
- [ ] Master Admin moÅ¾e vidjeti SVE organizacije s kompletnim info
- [ ] Master Admin moÅ¾e impersonate bilo kojeg korisnika
- [ ] Master Admin moÅ¾e izvrÅ¡iti bulk akcije
- [ ] Master Admin ima potpunu billing kontrolu
- [ ] Master Admin vidi balansiran dashboard

### 12.2 Performance
- Lista korisnika uÄitava se < 2s
- Detail page uÄitava se < 1s
- Bulk akcije procesiraju 100 entiteta < 30s
- Export generira CSV < 10s

### 12.3 Security
- Svi endpointi zaÅ¡tiÄ‡eni AdminGuard-om
- Sve akcije logirane u audit log
- Impersonation ima proper restrictions
- No data leakage izmeÄ‘u tenanta

---

## Appendix A: Komponente Reference

### A.1 DataTable s Bulk Selection
```typescript
interface DataTableProps<T> {
  data: T[];
  columns: ColumnDef<T>[];
  enableSelection?: boolean;
  onSelectionChange?: (selected: T[]) => void;
  bulkActions?: BulkAction[];
  pagination?: PaginationConfig;
  filters?: FilterConfig[];
  sorting?: SortConfig;
}
```

### A.2 Detail Page Layout
```typescript
interface DetailPageProps {
  title: string;
  subtitle?: string;
  breadcrumbs: Breadcrumb[];
  actions: ActionButton[];
  sections: DetailSection[];
}

interface DetailSection {
  title: string;
  icon?: React.ReactNode;
  content: React.ReactNode;
  collapsible?: boolean;
}
```

### A.3 Metrics Card
```typescript
interface MetricsCardProps {
  title: string;
  value: string | number;
  change?: {
    value: number;
    period: string;
    direction: 'up' | 'down' | 'neutral';
  };
  icon?: React.ReactNode;
  href?: string;
}
```

---

**Dokument kreiran**: 2025-12-15
**Status**: SPREMAN ZA IMPLEMENTACIJU
**SljedeÄ‡i korak**: ZapoÄeti FAZU 1 - Foundations
